# Core tiles

## Core.detect()

Tiles:

- *Called on React.js effect involving changed properties (x, y, size).*
- *Called on React.js empty-dependencies effect cleanup.*

Groups:

- *Called on React.js effect involving changed properties (index, label).*
- *Called on React.js empty-dependencies effect cleanup.*h.

## Group label

- [ ] Editing

## Tile drag-n-drop

Trick to use: Draggable needs to drag the tileDND element, not the tile itself. For this, simply dispatch virtual `mousedown` and `touchdown` events with corresponding data.

- [ ] _tile_drag_start
  - [x] Make tileDND visible and tileButton hidden
  - [x] Assign _original_state (compact, without DOM)
  - [x] Set `dragging=true`
  - [x] Make tileDND's Z-index maximum.
- [ ] _tile_drag_move
- [ ] _tile_drag_end
  - [ ] If tile was removed, exit.
  - [ ] Set `_original_state=new Map();`
  - [ ] Set `dragging=false`
  - [ ] Set `tileId=""`
  - [ ] Make tileDND hidden back and tileButton visible back

More:

- [ ] Note that the tile may be removed while dragging

## Group drag-n-drop

Group drag-n-drop mimmicks tiles a bit in how the Draggable instance is created, with some subtle differences.

- [ ] Label > touch start
  - [ ] Edit
  - [ ] Trigger drag-n-drop (long-held)
    - [ ] Trigger events
- [ ] Label > mouse down
  - [ ] Edit
  - [ ] Trigger drag-n-drop (after short-delta)
    - [ ] Trigger events

- [ ] _group_drag_start
  - [ ] `groupDraggable=[groupId,draggable]`
  - [ ] Assign _original_state (compact, without DOM)
  - [ ] Set `dragging=true`
  - [ ] Make group's Z-index maximum.
- [ ] _group_drag_move
- [ ] _group_drag_end
  - [ ] If group was removed, exit.
  - [ ] `groupDraggable![1].destroy()`
  - [ ] `groupDraggable=null`
  - [ ] Set `dragging=false`
  - [ ] Unassign group's Z-index.